<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>index</title>
    <link rel="stylesheet" type="text/css" href="./css/api.css" />
    <link rel="stylesheet" type="text/css" href="./css/style.css" />
    <style>
        header{ background-color: #f2f2f2;  line-height: 42px; font-size: 18px; text-align: center; }
        body{
            padding: 0px;
            background-color: #eee;
        }
    </style>
</head>
<body>
    <div id="wrap" class="flex-wrap flex-vertical" >
        <header></header>
        <div id="main" class="flex-con" >

        </div>
    </div>
</body>
</html>
<script type="text/javascript" src="./script/api.js"></script>
<script type="text/javascript">

    apiready = function(){
        var screenHeight = api.winHeight;
//        $api.fixStatusBar( $api.dom('header') );
        api.setStatusBarStyle({
            style: 'dark',
            color: '#6ab494'
        });
        api.openFrame({
            name: 'fang',
            url: './html/fang.html',
            rect: {
                x: 0,
                y: $api.dom('header').offsetHeight,
                w: 'auto',
                h: 'auto'
            },
            bounces:false,
            scrollToTop:true
        });
        var NVTabBar = api.require('NVTabBar');
        NVTabBar.open({
            styles: {
                bg: '#fff',
                h: 50,
                dividingLine: {
                    width: 0.5,
                    color: '#eee'
                },
                badge: {            //（可选项）JSON对象；徽章样式配置；若不传则去内部字段默认值
                    bgColor: '#FF0000', //（可选项）字符串类型；徽章背景色，支持rgb、rgba、#；默认：#ff0
                    numColor: '#fff',//（可选项）字符串类型；徽章数字字体颜色，支持rgb、rgba、#；默认：#fff
                    size: 6.0,       //（可选项）数字类型；徽章半径大小；默认值：6.0
                    fontSize:10,      // (可选项) 数字类型;设置徽章字体大小;默认值: 10 ;注意:仅支持iOS。
                    centerX: 20.0,    //（可选项）数字类型；徽章中心点坐标（相对于所属item的背景面板坐标系）；默认值：icon图标的右上角
                    centerY: 5.0     //（可选项）数字类型；徽章中心点坐标（相对于所属item的背景面板坐标系）；默认值：icon图标的右上角
                }
            },
            items: [{
                w: api.winWidth / 4.0,
                bg: {
                    marginB: 0,
                    image: 'rgba(0,0,0,0)'
                },
                iconRect: {
                    w: 25.0,
                    h: 25.0
                },
                icon: {
                    normal: 'widget://icon/home.png',
                    selected: 'widget://icon/home_active.png'
                },
                title: {
                    text: '首页',
                    size: 12.0,
                    normal: '#696969',
                    selected: '#0099FF',
                    marginB: 6.0
                }
            }, {
                w: api.winWidth / 4.0,
                bg: {
                    marginB: 0,
                    image: 'rgba(0,0,0,0)'
                },
                iconRect: {
                    w: 25.0,
                    h: 25.0,
                },
                icon: {
                    normal: 'widget://icon/msg.png',
                    selected: 'widget://icon/msg_active.png'
                },
                title: {
                    text: '消息',
                    size: 12.0,
                    normal: '#696969',
                    selected: '#0099FF',
                    marginB: 6.0,
                    badge:'2'
                }
            }, {
                w: api.winWidth / 4.0,
                bg: {
                    marginB: 0,
                    image: 'rgba(0,0,0,0)'
                },
                iconRect: {
                    w: 25.0,
                    h: 25.0,
                },
                icon: {
                    normal: 'widget://icon/order.png',
                    selected: 'widget://icon/order_active.png'
                },
                title: {
                    text: '订单',
                    size: 12.0,
                    normal: '#696969',
                    selected: '#0099FF',
                    marginB: 6.0
                }
            }, {
            w: api.winWidth / 4.0,
                bg: {
                marginB: 0,
                    image: 'rgba(0,0,0,0)'
            },
            iconRect: {
                w: 25.0,
                    h: 25.0,
            },
            icon: {
                normal: 'widget://icon/me.png',
                selected: 'widget://icon/me_active.png'
            },
            title: {
                text: '更多',
                    size: 12.0,
                    normal: '#696969',
                    selected: '#0099FF',
                    marginB: 6.0
            }
        }],
            selectedIndex: 0
        }, function(ret, err) {
            if (ret) {
                switch(ret.index){
                    case 0:
                        //首页
                        console.log(screenHeight);
                        api.openFrame({
                            name: 'fang',
                            url: './html/fang.html',
                            rect: {
                                x: 0,
                                y: $api.dom('header').offsetHeight,
                                w: 'auto',
                                h: screenHeight - 75
                            },
                            bounces:true,
                            scrollToTop:true
                        });
                        break;
                    case 1:
                        //消息
                        break;
                    case 2:
                        //订单
                        break;
                    case 3:
                        //更多
                        api.openFrame({
                            name: 'more',
                            url: './html/more.html',
                            rect: {
                                x: 0,
                                y: 0,
                                w: 'auto',
                                h: screenHeight - 50
                            },
                            bounces:false
                        });
                        break;
                }
            }
        });
//        NVTabBar.setBadge({
//            index: 3,
//            badge: '3'
//        });

    };
</script>